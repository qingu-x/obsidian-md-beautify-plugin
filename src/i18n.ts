import { moment } from 'obsidian';

const translations = {
	en: {
		preview_ribbon_tooltip: "Preview Beautified Layout",
		copy_command_name: "Copy current file with beautification",
		preview_command_name: "Preview beautified rendering",
		view_display_text: "MD Beautify Preview",
		no_active_markdown: "No active Markdown file",
		no_active_view: "No active Markdown view found",
		copy_success: "Successfully copied!",
		copy_failed: "Failed to copy: ",
		setting_theme: "Theme",
		setting_image_host: "Image Host",
		btn_copy: "Copy Beautified",
		btn_upload: "Upload",
		settings_header: "MD Beautify Settings",
		tab_general: "General",
		tab_theme: "Theme",
		tab_image_host: "Image Host",
		setting_copy_as_html: "Copy as HTML",
		setting_copy_as_html_desc: "Whether to include HTML formatting when copying to clipboard",
		setting_base_theme: "Select Theme",
		custom_style_title: "Custom Style for ",
		custom_style_desc: "Add your own CSS variables or styles here to override the base theme.",
		msg_style_saved: "Custom style for {themeId} saved",
		setting_active_image_host: "Active Image Host",
		setting_active_image_host_desc: "Choose where to upload images",
		setting_auto_upload: "Auto Upload Images",
		setting_auto_upload_desc: "Automatically upload local images when pasting or dragging to the editor",
		official_host_desc: "Default MD Beautify image hosting is enabled. No configuration required.",
		setting_official_url: "Default Upload URL",
		setting_official_url_desc: "The API endpoint for default image hosting",
		theme_basic: "Basic",
		theme_codeGithub: "GitHub Code",
		theme_academicPaper: "Academic Paper",
		theme_auroraGlass: "Aurora Glass",
		theme_bauhaus: "Bauhaus",
		theme_cyberpunkNeon: "Cyberpunk Neon",
		theme_knowledgeBase: "Knowledge Base",
		theme_luxuryGold: "Luxury Gold",
		theme_morandiForest: "Morandi Forest",
		theme_neoBrutalism: "Neo Brutalism",
		theme_receipt: "Receipt",
		theme_sunsetFilm: "Sunset Film",
		theme_template: "Template",
		host_official: "Default",
		host_qiniu: "Qiniu",
		host_aliyun: "Aliyun",
		host_tencent: "Tencent",
		host_s3: "S3",
		btn_create_theme: "Create Theme",
		new_theme_placeholder: "My New Theme",
		setting_custom_css: "Custom CSS",
		preview_title: "Live Preview",
		preview_placeholder: "# Hello World\n\nThis is a live preview.",
		label_theme: "Theme",
		label_host: "Host",
		btn_toggle_controls: "Toggle Settings",
		btn_cancel: "Cancel",
		msg_enter_theme_name: "Please enter a theme name",
		btn_manage_themes: "Manage Themes",
		title_theme_manager: "Theme Manager",
		btn_delete: "Delete",
		msg_confirm_delete_theme: "Are you sure you want to delete the theme '{themeName}'?",
		msg_uploading_image: "Uploading image...",
		msg_upload_success: "Image uploaded successfully",
		msg_upload_failed: "Failed to upload image: ",
		command_upload_all_images: "Upload all local images in current file",
		msg_no_local_images: "No local images found",
		msg_uploading_all: "Uploading {count} images...",
		msg_upload_all_done: "Successfully uploaded {count} images",
		export_html_command: "Export to HTML",
		export_pdf_command: "Export to PDF",
		export_pdf_image_command: "Export to PDF (Image - No selection)",
		export_pdf_vector_command: "Export to PDF (Vector - Selectable)",
		export_success: "Export successful",
		export_failed: "Export failed: ",
	},
	zh: {
		preview_ribbon_tooltip: "预览美化排版",
		copy_command_name: "美化并复制当前文件",
		preview_command_name: "预览美化渲染效果",
		view_display_text: "MD Beautify 预览",
		no_active_markdown: "没有打开的 Markdown 文件",
		no_active_view: "未找到活跃的 Markdown 视图",
		copy_success: "已成功复制到剪贴板！",
		copy_failed: "复制失败: ",
		setting_theme: "主题",
		setting_image_host: "图床",
		btn_copy: "美化复制",
		btn_upload: "上传",
		settings_header: "MD Beautify 设置",
		tab_general: "常规",
		tab_theme: "主题",
		tab_image_host: "图床",
		setting_copy_as_html: "复制为 HTML",
		setting_copy_as_html_desc: "复制到剪贴板时是否包含 HTML 格式",
		setting_base_theme: "基础主题",
		setting_base_theme_desc: "选择用于导出的基础主题",
		custom_style_title: "自定义样式 - ",
		custom_style_desc: "在此添加你自己的 CSS 变量或样式以覆盖基础主题。",
		msg_style_saved: "{themeId} 的自定义样式已保存",
		setting_active_image_host: "当前图床",
		setting_active_image_host_desc: "选择上传图片的图床",
		setting_auto_upload: "自动上传图片",
		setting_auto_upload_desc: "在编辑器粘贴或拖拽本地图片时自动上传到图床",
		official_host_desc: "已启用 MD Beautify 默认图床。无需额外配置。",
		setting_official_url: "默认上传 URL",
		setting_official_url_desc: "默认图床的 API 接口地址",
		theme_basic: "基础风格",
		theme_codeGithub: "GitHub 代码",
		theme_academicPaper: "学术论文",
		theme_auroraGlass: "极光玻璃",
		theme_bauhaus: "包豪斯",
		theme_cyberpunkNeon: "赛博朋克霓虹",
		theme_knowledgeBase: "知识库",
		theme_luxuryGold: "轻奢金",
		theme_morandiForest: "莫兰迪森林",
		theme_neoBrutalism: "新野兽主义",
		theme_receipt: "小票样式",
		theme_sunsetFilm: "落日胶片",
		theme_template: "模板",
		host_official: "默认",
		host_qiniu: "七牛云",
		host_aliyun: "阿里云",
		host_tencent: "腾讯云",
		host_s3: "S3 兼容",
		btn_create_theme: "新建主题",
		new_theme_placeholder: "我的新主题",
		setting_custom_css: "自定义 CSS",
		preview_title: "实时预览",
		preview_placeholder: "# 你好，世界\n\n这是一个实时预览。",
		label_theme: "主题",
		label_host: "图床",
		btn_toggle_controls: "切换设置显示",
		btn_cancel: "取消",
		msg_enter_theme_name: "请输入主题名称",
		btn_manage_themes: "管理主题",
		title_theme_manager: "主题管理",
		btn_delete: "删除",
		msg_confirm_delete_theme: "确定要删除主题 '{themeName}' 吗？",
		msg_uploading_image: "正在上传图片...",
		msg_upload_success: "图片上传成功",
		msg_upload_failed: "图片上传失败: ",
		command_upload_all_images: "上传当前文件中的所有本地图片",
		msg_no_local_images: "未发现本地图片",
		msg_uploading_all: "正在上传 {count} 张图片...",
		msg_upload_all_done: "成功上传 {count} 张图片",
		export_html_command: "导出为 HTML",
		export_pdf_command: "导出为 PDF",
		export_pdf_image_command: "导出为 PDF (图片 - 不可选中)",
		export_pdf_vector_command: "导出为 PDF (矢量 - 可选中)",
		export_success: "导出成功",
		export_failed: "导出失败: ",
	}
};

export type TranslationKey = keyof typeof translations.en;

export const t = (key: TranslationKey, vars?: Record<string, string>): string => {
	const lang = (moment.locale() === 'zh-cn' || moment.locale() === 'zh') ? 'zh' : 'en';
	let text = translations[lang][key] || translations.en[key];
	
	if (vars) {
		Object.keys(vars).forEach(v => {
			text = text.replace(`{${v}}`, vars[v]);
		});
	}
	
	return text;
};
